<!-- vim: ts=2:sw=2
-->
<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>syste.md - my init does what?</title>

		<link rel="stylesheet" href="css/reveal.css">
		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">
		<link rel="stylesheet" href="css/theme/reveal-coreos.css">


		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
						<section>
						<h2>Wait, my init does <i>what</i></h2>
						<h4>A tour of systemd's lesser known <i>features</i></h4>
						<br/><br/>
						<center>
		<pre style="color:white; background-color:black; font-size:smaller; width:80%; padding:6pt 8pt">Welcome to <span style="color:#00fbd5">Container Linux by CoreOS 1353.7.0 (Ladybug)</span>!

[  <span style="color:green">OK</span>  ] Reached target Remote File Systems.
[  <span style="color:green">OK</span>  ] Listening on Delayed Shutdown Socket.
[  <span style="color:green">OK</span>  ] Listening on /dev/initctl Compatibility Named Pipe.
[  <span style="color:green">OK</span>  ] Starting flamewars
[  <span style="color:green">OK</span>  ] Assimilating distros
[  <span style="color:green">OK</span>  ] Reached target Presentation.

This is presentation (Linux x86_64 4.9.24-coreos)

presentation login:
		</pre>
						</section>
						<section>
						<h3>Logo (unofficial)</h3>
						<img height="400px" src="imgs/sockd.png"></img>
						<small>Thanks to <a href="https://plus.google.com/109547798280253932606/posts/jP5YonjEfc6">Amanda Breard</a></small>
						</section>
				</section>

				<section>
					<h3>About me</h3>
					<div class="flex-between">
					<pre>
        $ whois euank
        
           Name: Euan Kemp
            Job: Software Dev @ CoreOS
        Webpage: euank.com
        Twitter: @wobscale
					</pre>
					<img style="align-self: flex-end" src="imgs/euank.png" height="200px"></img>
					</div>

					<div class="flex-around">
						<img style="float: left" src="imgs/container-linux.png" height="200px"></img> 
						<img style="float: left" src="imgs/rkt-glyph-color.png" height="200px"></img> 
					</div>
				</section>

				<section>
					<section>
						<h3>Container Linux & systemd</h3>
						<p>systemd is one of the most important parts of Container Linux
					</section>
					<section>
						<h3>Important.. how?</h3>
						<h4 class="fragment">By size?</h4>
					</section>
					<section data-markdown>
						<script type="text/template">
							### Nope

							| Package | Size &nbsp;&nbsp;| Percent |
							| ------------- |:-------------:| -----:|
							|coreos-modules|76M|11.77%|
							|etcd|60M|9.28%|
							|docker|58M|8.90%|
							|rkt|54M|8.33%|
							|coreos-kernel|36M|5.53%|
							|selinux-base-policy|32M|4.98%|
							|bind-tools|30M|4.66%|
							|selinux-base|24M|3.63%|
							|git|17M|2.68%|
							|containerd|14M|2.22%|
							|glibc|12M|1.89%|
							|systemd|12M|1.81%|
							|hwids|11M|1.73%|
							|fleet|11M|1.70%|

						</script>
					</section>
					<section>
						<h3>By version number?</h3>
						<div class="fragment" style"text-align: left;">
							<ol>
								<li> less &mdash; v478</li>
								<li> systemd &mdash; v233</li>
								<li> liblinear &mdash; v210</li>
								<li> kmod &mdash; v21
							</ol>
						</div>
					</section>
					<section>
						<h3>By PID</h3>
						<div class="fragment">
						<h4>#1</h4>
						<img src="imgs/number-one.jpg"></img>

						<footer><small>* yes, I know about <code>sched</code></small></footer>
						</div>
					</section>
				</section>

				<section>
					<section>
						<h2>What is an init</h2>
						<p> The process the kernel starts first.</p>
						<br />
						<div class="fragment">
							<h4>Responsibilities</h4>
							<ul>
								<li> Stay alive until shutdown (and allow shutdown)</li>
								<li> Launch any additional desired programs (e.g. networking, login console, etc)</li>
								<li> Adopt orphans ðŸ˜‡</li>
								<li class="fragment"> Reap children ðŸ˜ˆ</li>
							</ul>
						</div>
					</section>
					<section>
						<img src="imgs/technically-correct.png"></img>
					</section>
					<section>
						<h3>What is an init</h3>
						<br>
						<ul>
							<li> <code>start</code> and <code>stop</code> commands for services</li>
							<li> A configuration format for creating new services definitions</li>
							<li> Service runtime dependencies</li>
							<li> Runlevels</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h3>systemd's history</h3>
						<h5>From controversial to commonplace</h5>
						<img height="400px" src="imgs/sockd-notext.png"></img>
					</section>
					<section>
						<div class="flex">
							<div>
								1982
								<h2>In the beginning</h2>
								God created the heavens, the earth, and UNIX System III. Thus SysV init was born.
							</div>
						</div>
					</section>
					<section>
						2005
						Apple created launchd.
						The only thing better than bash is XML.
					</section>
					<section>
						2006 Canonical releases upstart
					</section>
					<section>
						2010
						Lennert Poettering created systemd
					</section>
					<section>
						2011
						Fedora
						The journal
					</section>
				</section>
				<section>
					<section>
						<h2>systemd - the init daemon</h2>
					</section>
					<section>
						<h2>systemd - the init daemon</h2>
						<h3><code>--user</code></h3>
					</section>
					<section>
						<h2>systemd - the init daemon</h2>
						<h3>as pid &gt; 1</h3>
					</section>
					<section>
						<img src="imgs/roll-safe.png" alt="services can't start slow if you don't start them meme"></img>
					</section>
				</section>
				<section>
					<section>
						<h2>systemctl</h2>
					</section>
					<section>
						<h2>systemctl</h2>
						<h3><code>--host</code></h3>
					</section>
				</section>
				<section>
					<section>
						<h2>journald</h2>
					</section>
					<section>
						<h2>sealing the journal</h2>
					</section>
					<section>
						<h2>printing a QR code</h2>
					</section>
				</section>
				<section>
					<section>
						<h2>logind</h2>
					</section>
					<section>
						<h2>consoled</h2>
					</section>
				</section>
				<section>
					<h2>timers</h2>
				</section>
				<section>
					<h2>coredumps</h2>
				</section>
				<section>
					<section>
						<h2>machinectl</h2>
					</section>
				</section>
				<section>
					<h2>timesyncd</h2>
				</section>
				<section>
					<section>
						<h2>systemd the bootloader</h2>
					</section>
				</section>
				<section>
					<section>
						<h2>Running containers</h2>
					</section>
					<section>
						<h2>nspawn</h2>
					</section>
					<section>
						<h2>rkt</h2>
					</section>
					<section>
						<h2>Plain Old Service Files</h2>
					</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
